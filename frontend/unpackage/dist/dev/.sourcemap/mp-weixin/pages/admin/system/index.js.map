{"version":3,"sources":["uni-app:///main.js","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/admin/system/index.vue?2974","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/admin/system/index.vue?d5e7","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/admin/system/index.vue?b45c","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/admin/system/index.vue?b1e4","uni-app:///pages/admin/system/index.vue","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/admin/system/index.vue?52ad","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/admin/system/index.vue?f96c"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","loading","systemSettings","systemName","logoUrl","systemDesc","emailNotificationEnabled","smtpServer","smtpPort","emailAccount","emailPassword","loginLimitEnabled","maxLoginAttempts","lockDurationMinutes","passwordPolicyEnabled","minPasswordLength","passwordComplexity","passwordComplexityOptions","passwordComplexityIndex","passwordComplexityValues","onShow","methods","navBack","uni","loadSettings","url","method","header","err","res","complexityIndex","console","title","icon","handleSwitchChange","handleComplexityChange","uploadLogo","count","success","filePath","name","fail","complete","removeLogo","content","testEmail","saveSetting","validatePass","settingsToSave"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AACmN;AACnN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAk1B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC6Ot2B;EACAC;IACA;MACAC;MACAC;QACA;QACAC;QACAC;QACAC;QAEA;QACAC;QACAC;QACAC;QACAC;QACAC;QAEA;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;EACA;EACAC;IACAC;MACAC;IACA;IAEAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACA;gBAAA;gBAAA;gBAAA,OAEAD;kBACAE;kBACAC;kBACAC;oBACA;kBACA;gBACA;cAAA;gBAAA;gBAAA;gBANAC;gBAAAC;gBAQA;kBACA;;kBAEA;kBACA;oBACAC;oBACA;sBACA;oBACA;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAC;gBACAR;kBACAS;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAC;MACA;IACA;IAEAC;MACA;MACA;IACA;IAEAC;MAAA;MACAb;QACAc;QACAC;UACA;UACA;UAEAf;YACAE;YACAc;YACAC;YACAb;cACA;YACA;YACAW;cACA;cACA;gBACA;gBACAf;kBACAS;kBACAC;gBACA;cACA;gBACAV;kBACAS;kBACAC;gBACA;cACA;YACA;YACAQ;cACAlB;gBACAS;gBACAC;cACA;YACA;YACAS;cACA;YACA;UACA;QACA;MACA;IACA;IAEAC;MAAA;MACApB;QACAS;QACAY;QACAN;UACA;YACA;YACAf;cACAS;cACAC;YACA;UACA;QACA;MACA;IACA;IAEAY;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAtB;kBACAS;kBACAC;gBACA;gBAAA;cAAA;gBAIA;gBAAA;gBAAA;gBAAA,OAEAV;kBACAE;kBACAC;kBACAC;oBACA;oBACA;kBACA;kBACA3B;oBACAO;oBACAC;oBACAC;oBACAC;kBACA;gBACA;cAAA;gBAAA;gBAAA;gBAbAkB;gBAAAC;gBAeA;kBACAN;oBACAS;oBACAC;kBACA;gBACA;kBACAV;oBACAS;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAV;kBACAS;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEAa;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACAC,qBAEA;gBACA;kBACA;oBACAzB;sBACAS;sBACAC;oBACA;oBACAc;kBACA;kBAEAC;oBACA7C;oBACAC;oBACAC;kBACA;gBACA;kBACA;oBACA;sBACAkB;wBACAS;wBACAC;sBACA;sBACAc;oBACA;kBACA;kBAEAC;oBACA1C;oBACAC;oBACAC;oBACAC;oBACAC;kBACA;gBACA;kBACA;oBACA;sBACAa;wBACAS;wBACAC;sBACA;sBACAc;oBACA;kBACA;kBAEA;oBACA;sBACAxB;wBACAS;wBACAC;sBACA;sBACAc;oBACA;kBACA;kBAEAC;oBACArC;oBACAC;oBACAC;oBACAC;oBACAC;oBACAC;kBACA;gBACA;gBAAA,IAEA+B;kBAAA;kBAAA;gBAAA;gBAAA;cAAA;gBAEA;gBAAA;gBAAA;gBAAA,OAEAxB;kBACAE;kBACAC;kBACAC;oBACA;oBACA;kBACA;kBACA3B;gBACA;cAAA;gBAAA;gBAAA;gBARA4B;gBAAAC;gBAUA;kBACAN;oBACAS;oBACAC;kBACA;gBACA;kBACAV;oBACAS;oBACAC;kBACA;gBACA;gBAAA;gBAAA;cAAA;gBAAA;gBAAA;gBAEAV;kBACAS;kBACAC;gBACA;cAAA;gBAAA;gBAEA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC9gBA;AAAA;AAAA;AAAA;AAA6jD,CAAgB,k6CAAG,EAAC,C;;;;;;;;;;;ACAjlD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/admin/system/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/admin/system/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=49f4322a&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/admin/system/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=49f4322a&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <view class=\"header\">\n      <view class=\"back-button\" @tap=\"navBack\">\n        <text class=\"iconfont icon-left\"></text>\n      </view>\n      <text class=\"title\">系统设置</text>\n    </view>\n    \n    <view class=\"content\">\n      <view class=\"setting-groups\">\n        <view class=\"setting-card\">\n          <view class=\"card-header\">\n            <text class=\"card-title\">\n              <text class=\"title-icon iconfont icon-basic\"></text>\n              基础设置\n            </text>\n          </view>\n          <view class=\"setting-list\">\n            <view class=\"setting-item\">\n              <view class=\"setting-label\">系统名称</view>\n              <view class=\"setting-editor\">\n                <input \n                  type=\"text\" \n                  v-model=\"systemSettings.systemName\" \n                  placeholder=\"请输入系统名称\"\n                  class=\"input\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\">\n              <view class=\"setting-label\">系统Logo</view>\n              <view class=\"setting-editor\">\n                <view class=\"logo-preview\" v-if=\"systemSettings.logoUrl\">\n                  <image :src=\"systemSettings.logoUrl\" mode=\"aspectFit\" class=\"logo-image\"></image>\n                  <text class=\"logo-remove iconfont icon-delete\" @tap=\"removeLogo\"></text>\n                </view>\n                <button class=\"upload-button\" @tap=\"uploadLogo\" v-else>\n                  <text class=\"upload-icon iconfont icon-upload\"></text>\n                  <text>上传Logo</text>\n                </button>\n              </view>\n            </view>\n            <view class=\"setting-item\">\n              <view class=\"setting-label\">系统描述</view>\n              <view class=\"setting-editor\">\n                <textarea \n                  v-model=\"systemSettings.systemDesc\" \n                  placeholder=\"请输入系统描述\"\n                  class=\"textarea\"\n                />\n              </view>\n            </view>\n          </view>\n          <view class=\"card-actions\">\n            <button class=\"save-button\" @tap=\"saveSetting('basic')\">\n              <text class=\"button-icon iconfont icon-save\"></text>\n              保存更改\n            </button>\n          </view>\n        </view>\n        \n        <view class=\"setting-card\">\n          <view class=\"card-header\">\n            <text class=\"card-title\">\n              <text class=\"title-icon iconfont icon-notice\"></text>\n              通知设置\n            </text>\n          </view>\n          <view class=\"setting-list\">\n            <view class=\"setting-item\">\n              <view class=\"setting-label\">邮件通知</view>\n              <view class=\"setting-editor\">\n                <switch \n                  :checked=\"systemSettings.emailNotificationEnabled\" \n                  @change=\"handleSwitchChange('emailNotificationEnabled', $event)\" \n                  color=\"#4aa3ff\"\n                  class=\"switch\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\" v-if=\"systemSettings.emailNotificationEnabled\">\n              <view class=\"setting-label\">SMTP服务器</view>\n              <view class=\"setting-editor\">\n                <input \n                  type=\"text\" \n                  v-model=\"systemSettings.smtpServer\" \n                  placeholder=\"请输入SMTP服务器地址\"\n                  class=\"input\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\" v-if=\"systemSettings.emailNotificationEnabled\">\n              <view class=\"setting-label\">SMTP端口</view>\n              <view class=\"setting-editor\">\n                <input \n                  type=\"number\" \n                  v-model=\"systemSettings.smtpPort\" \n                  placeholder=\"请输入SMTP端口\"\n                  class=\"input\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\" v-if=\"systemSettings.emailNotificationEnabled\">\n              <view class=\"setting-label\">邮箱账号</view>\n              <view class=\"setting-editor\">\n                <input \n                  type=\"text\" \n                  v-model=\"systemSettings.emailAccount\" \n                  placeholder=\"请输入邮箱账号\"\n                  class=\"input\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\" v-if=\"systemSettings.emailNotificationEnabled\">\n              <view class=\"setting-label\">邮箱密码</view>\n              <view class=\"setting-editor\">\n                <input \n                  type=\"password\" \n                  v-model=\"systemSettings.emailPassword\" \n                  placeholder=\"请输入邮箱密码\"\n                  class=\"input\"\n                />\n              </view>\n            </view>\n          </view>\n          <view class=\"card-actions\">\n            <button class=\"test-button\" @tap=\"testEmail\" v-if=\"systemSettings.emailNotificationEnabled\">\n              <text class=\"button-icon iconfont icon-test\"></text>\n              测试发送\n            </button>\n            <button class=\"save-button\" @tap=\"saveSetting('email')\">\n              <text class=\"button-icon iconfont icon-save\"></text>\n              保存更改\n            </button>\n          </view>\n        </view>\n        \n        <view class=\"setting-card\">\n          <view class=\"card-header\">\n            <text class=\"card-title\">\n              <text class=\"title-icon iconfont icon-security\"></text>\n              安全设置\n            </text>\n          </view>\n          <view class=\"setting-list\">\n            <view class=\"setting-item\">\n              <view class=\"setting-label\">登录限制</view>\n              <view class=\"setting-editor\">\n                <switch \n                  :checked=\"systemSettings.loginLimitEnabled\" \n                  @change=\"handleSwitchChange('loginLimitEnabled', $event)\" \n                  color=\"#4aa3ff\"\n                  class=\"switch\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\" v-if=\"systemSettings.loginLimitEnabled\">\n              <view class=\"setting-label\">最大尝试次数</view>\n              <view class=\"setting-editor\">\n                <input \n                  type=\"number\" \n                  v-model=\"systemSettings.maxLoginAttempts\" \n                  placeholder=\"请输入最大尝试次数\"\n                  class=\"input\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\" v-if=\"systemSettings.loginLimitEnabled\">\n              <view class=\"setting-label\">锁定时间(分钟)</view>\n              <view class=\"setting-editor\">\n                <input \n                  type=\"number\" \n                  v-model=\"systemSettings.lockDurationMinutes\" \n                  placeholder=\"请输入锁定时间\"\n                  class=\"input\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\">\n              <view class=\"setting-label\">密码策略</view>\n              <view class=\"setting-editor\">\n                <switch \n                  :checked=\"systemSettings.passwordPolicyEnabled\" \n                  @change=\"handleSwitchChange('passwordPolicyEnabled', $event)\" \n                  color=\"#4aa3ff\"\n                  class=\"switch\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\" v-if=\"systemSettings.passwordPolicyEnabled\">\n              <view class=\"setting-label\">最小密码长度</view>\n              <view class=\"setting-editor\">\n                <input \n                  type=\"number\" \n                  v-model=\"systemSettings.minPasswordLength\" \n                  placeholder=\"请输入最小密码长度\"\n                  class=\"input\"\n                />\n              </view>\n            </view>\n            <view class=\"setting-item\" v-if=\"systemSettings.passwordPolicyEnabled\">\n              <view class=\"setting-label\">密码复杂度要求</view>\n              <view class=\"setting-editor\">\n                <picker \n                  :range=\"passwordComplexityOptions\" \n                  :value=\"passwordComplexityIndex\"\n                  @change=\"handleComplexityChange\"\n                >\n                  <view class=\"picker-value\">\n                    {{passwordComplexityOptions[passwordComplexityIndex]}}\n                    <text class=\"iconfont icon-down\"></text>\n                  </view>\n                </picker>\n              </view>\n            </view>\n          </view>\n          <view class=\"card-actions\">\n            <button class=\"save-button\" @tap=\"saveSetting('security')\">\n              <text class=\"button-icon iconfont icon-save\"></text>\n              保存更改\n            </button>\n          </view>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 加载中遮罩 -->\n    <view class=\"loading-overlay\" v-if=\"loading\">\n      <view class=\"loading-content\">\n        <text class=\"loading-text\">加载中...</text>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      loading: false,\n      systemSettings: {\n        // 基础设置\n        systemName: '招生管理系统',\n        logoUrl: '',\n        systemDesc: '',\n        \n        // 邮件设置\n        emailNotificationEnabled: false,\n        smtpServer: '',\n        smtpPort: 465,\n        emailAccount: '',\n        emailPassword: '',\n        \n        // 安全设置\n        loginLimitEnabled: false,\n        maxLoginAttempts: 5,\n        lockDurationMinutes: 30,\n        passwordPolicyEnabled: false,\n        minPasswordLength: 8,\n        passwordComplexity: 'MEDIUM'\n      },\n      passwordComplexityOptions: ['低', '中', '高'],\n      passwordComplexityIndex: 1,\n      passwordComplexityValues: ['LOW', 'MEDIUM', 'HIGH']\n    }\n  },\n  onShow() {\n    this.loadSettings()\n  },\n  methods: {\n    navBack() {\n      uni.navigateBack();\n    },\n    \n    async loadSettings() {\n      this.loading = true;\n      try {\n        const [err, res] = await uni.request({\n          url: 'http://localhost:8080/api/system/settings',\n          method: 'GET',\n          header: {\n            'Authorization': uni.getStorageSync('token')\n          }\n        })\n        \n        if (!err && res.statusCode === 200) {\n          this.systemSettings = res.data.data || this.systemSettings\n          \n          // 设置密码复杂度下拉索引\n          if (this.systemSettings.passwordComplexity) {\n            const complexityIndex = this.passwordComplexityValues.indexOf(this.systemSettings.passwordComplexity)\n            if (complexityIndex !== -1) {\n              this.passwordComplexityIndex = complexityIndex\n            }\n          }\n        }\n      } catch (error) {\n        console.error('获取系统设置失败:', error)\n        uni.showToast({\n          title: '获取系统设置失败',\n          icon: 'none'\n        })\n      } finally {\n        this.loading = false;\n      }\n    },\n    \n    handleSwitchChange(key, event) {\n      this.systemSettings[key] = event.detail.value\n    },\n    \n    handleComplexityChange(e) {\n      this.passwordComplexityIndex = e.detail.value\n      this.systemSettings.passwordComplexity = this.passwordComplexityValues[this.passwordComplexityIndex]\n    },\n    \n    uploadLogo() {\n      uni.chooseImage({\n        count: 1,\n        success: (res) => {\n          const tempFilePath = res.tempFilePaths[0]\n          this.loading = true\n          \n          uni.uploadFile({\n            url: 'http://localhost:8080/api/system/upload-logo',\n            filePath: tempFilePath,\n            name: 'file',\n            header: {\n              'Authorization': uni.getStorageSync('token')\n            },\n            success: (uploadRes) => {\n              const result = JSON.parse(uploadRes.data)\n              if (uploadRes.statusCode === 200 && result.code === 200) {\n                this.systemSettings.logoUrl = result.data.url\n                uni.showToast({\n                  title: '上传成功',\n                  icon: 'success'\n                })\n              } else {\n                uni.showToast({\n                  title: '上传失败',\n                  icon: 'none'\n                })\n              }\n            },\n            fail: () => {\n              uni.showToast({\n                title: '上传失败',\n                icon: 'none'\n              })\n            },\n            complete: () => {\n              this.loading = false\n            }\n          })\n        }\n      })\n    },\n    \n    removeLogo() {\n      uni.showModal({\n        title: '确认删除',\n        content: '确定要删除当前Logo吗？',\n        success: (res) => {\n          if (res.confirm) {\n            this.systemSettings.logoUrl = ''\n            uni.showToast({\n              title: '已删除',\n              icon: 'success'\n            })\n          }\n        }\n      })\n    },\n    \n    async testEmail() {\n      if (!this.systemSettings.emailAccount) {\n        uni.showToast({\n          title: '请输入邮箱账号',\n          icon: 'none'\n        })\n        return\n      }\n      \n      this.loading = true\n      try {\n        const [err, res] = await uni.request({\n          url: 'http://localhost:8080/api/system/test-email',\n          method: 'POST',\n          header: {\n            'Authorization': uni.getStorageSync('token'),\n            'Content-Type': 'application/json'\n          },\n          data: {\n            smtpServer: this.systemSettings.smtpServer,\n            smtpPort: this.systemSettings.smtpPort,\n            emailAccount: this.systemSettings.emailAccount,\n            emailPassword: this.systemSettings.emailPassword\n          }\n        })\n        \n        if (!err && res.statusCode === 200) {\n          uni.showToast({\n            title: '测试邮件发送成功',\n            icon: 'success'\n          })\n        } else {\n          uni.showToast({\n            title: res.data.message || '测试邮件发送失败',\n            icon: 'none'\n          })\n        }\n      } catch (error) {\n        uni.showToast({\n          title: '测试邮件发送失败',\n          icon: 'none'\n        })\n      } finally {\n        this.loading = false\n      }\n    },\n    \n    async saveSetting(type) {\n      let validatePass = true\n      let settingsToSave = {}\n      \n      // 根据类型校验不同的设置\n      if (type === 'basic') {\n        if (!this.systemSettings.systemName) {\n          uni.showToast({\n            title: '请输入系统名称',\n            icon: 'none'\n          })\n          validatePass = false\n        }\n        \n        settingsToSave = {\n          systemName: this.systemSettings.systemName,\n          logoUrl: this.systemSettings.logoUrl,\n          systemDesc: this.systemSettings.systemDesc\n        }\n      } else if (type === 'email') {\n        if (this.systemSettings.emailNotificationEnabled) {\n          if (!this.systemSettings.smtpServer || !this.systemSettings.emailAccount) {\n            uni.showToast({\n              title: '请填写完整的邮件设置',\n              icon: 'none'\n            })\n            validatePass = false\n          }\n        }\n        \n        settingsToSave = {\n          emailNotificationEnabled: this.systemSettings.emailNotificationEnabled,\n          smtpServer: this.systemSettings.smtpServer,\n          smtpPort: this.systemSettings.smtpPort,\n          emailAccount: this.systemSettings.emailAccount,\n          emailPassword: this.systemSettings.emailPassword\n        }\n      } else if (type === 'security') {\n        if (this.systemSettings.loginLimitEnabled) {\n          if (!this.systemSettings.maxLoginAttempts || !this.systemSettings.lockDurationMinutes) {\n            uni.showToast({\n              title: '请填写完整的登录限制设置',\n              icon: 'none'\n            })\n            validatePass = false\n          }\n        }\n        \n        if (this.systemSettings.passwordPolicyEnabled) {\n          if (!this.systemSettings.minPasswordLength) {\n            uni.showToast({\n              title: '请填写密码最小长度',\n              icon: 'none'\n            })\n            validatePass = false\n          }\n        }\n        \n        settingsToSave = {\n          loginLimitEnabled: this.systemSettings.loginLimitEnabled,\n          maxLoginAttempts: this.systemSettings.maxLoginAttempts,\n          lockDurationMinutes: this.systemSettings.lockDurationMinutes,\n          passwordPolicyEnabled: this.systemSettings.passwordPolicyEnabled,\n          minPasswordLength: this.systemSettings.minPasswordLength,\n          passwordComplexity: this.systemSettings.passwordComplexity\n        }\n      }\n      \n      if (!validatePass) return\n      \n      this.loading = true\n      try {\n        const [err, res] = await uni.request({\n          url: `http://localhost:8080/api/system/settings/${type}`,\n          method: 'PUT',\n          header: {\n            'Authorization': uni.getStorageSync('token'),\n            'Content-Type': 'application/json'\n          },\n          data: settingsToSave\n        })\n        \n        if (!err && res.statusCode === 200) {\n          uni.showToast({\n            title: '保存成功',\n            icon: 'success'\n          })\n        } else {\n          uni.showToast({\n            title: res.data.message || '保存失败',\n            icon: 'none'\n          })\n        }\n      } catch (error) {\n        uni.showToast({\n          title: '保存失败',\n          icon: 'none'\n        })\n      } finally {\n        this.loading = false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.container {\n  min-height: 100vh;\n  background-color: #f6f8fa;\n  display: flex;\n  flex-direction: column;\n}\n\n.header {\n  display: flex;\n  align-items: center;\n  background: linear-gradient(135deg, #4aa3ff 0%, #3a93f0 100%);\n  color: #fff;\n  padding: 20rpx 30rpx;\n  height: 90rpx;\n  box-shadow: 0 4rpx 16rpx rgba(74, 163, 255, 0.2);\n  position: relative;\n  z-index: 10;\n  \n  .back-button {\n    font-size: 40rpx;\n    width: 60rpx;\n    display: flex;\n    align-items: center;\n    transition: opacity 0.2s;\n    \n    &:active {\n      opacity: 0.7;\n    }\n  }\n  \n  .title {\n    font-size: 36rpx;\n    font-weight: 500;\n    text-align: center;\n    flex: 1;\n  }\n}\n\n.content {\n  flex: 1;\n  padding: 30rpx;\n  \n  .setting-groups {\n    .setting-card {\n      background-color: #fff;\n      border-radius: 16rpx;\n      box-shadow: 0 4rpx 16rpx rgba(0,0,0,0.05);\n      margin-bottom: 30rpx;\n      overflow: hidden;\n      transition: transform 0.3s, box-shadow 0.3s;\n      \n      &:hover {\n        transform: translateY(-2rpx);\n        box-shadow: 0 8rpx 24rpx rgba(0,0,0,0.08);\n      }\n      \n      .card-header {\n        padding: 30rpx;\n        border-bottom: 1rpx solid #f0f0f0;\n        \n        .card-title {\n          font-size: 32rpx;\n          font-weight: 600;\n          color: #333;\n          display: flex;\n          align-items: center;\n          \n          .title-icon {\n            font-size: 36rpx;\n            color: #4aa3ff;\n            margin-right: 16rpx;\n          }\n        }\n      }\n      \n      .setting-list {\n        .setting-item {\n          display: flex;\n          align-items: center;\n          padding: 24rpx 30rpx;\n          border-bottom: 1rpx solid #f8f8f8;\n          \n          &:last-child {\n            border-bottom: none;\n          }\n          \n          .setting-label {\n            width: 240rpx;\n            font-size: 28rpx;\n            font-weight: 500;\n            color: #333;\n            padding-right: 20rpx;\n          }\n          \n          .setting-editor {\n            flex: 1;\n            \n            .input {\n              width: 100%;\n              height: 80rpx;\n              background-color: #f6f8fa;\n              border-radius: 12rpx;\n              padding: 0 24rpx;\n              font-size: 28rpx;\n              color: #333;\n              border: 2rpx solid transparent;\n              transition: all 0.3s;\n              box-shadow: inset 0 2rpx 6rpx rgba(0,0,0,0.03);\n              \n              &:focus {\n                border-color: #4aa3ff;\n                box-shadow: 0 0 0 3rpx rgba(74, 163, 255, 0.1);\n              }\n            }\n            \n            .textarea {\n              width: 100%;\n              height: 160rpx;\n              background-color: #f6f8fa;\n              border-radius: 12rpx;\n              padding: 24rpx;\n              font-size: 28rpx;\n              color: #333;\n              border: 2rpx solid transparent;\n              transition: all 0.3s;\n              box-shadow: inset 0 2rpx 6rpx rgba(0,0,0,0.03);\n              \n              &:focus {\n                border-color: #4aa3ff;\n                box-shadow: 0 0 0 3rpx rgba(74, 163, 255, 0.1);\n              }\n            }\n            \n            .picker-value {\n              width: 100%;\n              height: 80rpx;\n              line-height: 80rpx;\n              background-color: #f6f8fa;\n              border-radius: 12rpx;\n              padding: 0 24rpx;\n              font-size: 28rpx;\n              color: #333;\n              display: flex;\n              justify-content: space-between;\n              align-items: center;\n              border: 2rpx solid transparent;\n              transition: all 0.3s;\n              box-shadow: inset 0 2rpx 6rpx rgba(0,0,0,0.03);\n              \n              .iconfont {\n                font-size: 24rpx;\n                color: #999;\n                transition: transform 0.3s;\n              }\n              \n              &:active .iconfont {\n                transform: rotate(180deg);\n              }\n            }\n            \n            .switch {\n              transform: scale(0.9);\n              margin-left: -10rpx;\n            }\n            \n            .logo-preview {\n              position: relative;\n              width: 200rpx;\n              height: 120rpx;\n              display: flex;\n              justify-content: center;\n              align-items: center;\n              background-color: #f6f8fa;\n              border-radius: 12rpx;\n              box-shadow: inset 0 2rpx 6rpx rgba(0,0,0,0.03);\n              \n              .logo-image {\n                max-width: 180rpx;\n                max-height: 100rpx;\n                border-radius: 4rpx;\n              }\n              \n              .logo-remove {\n                position: absolute;\n                top: -16rpx;\n                right: -16rpx;\n                width: 44rpx;\n                height: 44rpx;\n                background: #ff4d4f;\n                color: #fff;\n                border-radius: 50%;\n                display: flex;\n                justify-content: center;\n                align-items: center;\n                font-size: 24rpx;\n                box-shadow: 0 4rpx 12rpx rgba(255, 77, 79, 0.25);\n                z-index: 2;\n                transition: all 0.3s;\n                \n                &:active {\n                  transform: scale(0.9);\n                }\n              }\n            }\n            \n            .upload-button {\n              width: 200rpx;\n              height: 80rpx;\n              line-height: 80rpx;\n              background: linear-gradient(135deg, #4aa3ff 0%, #3a93f0 100%);\n              color: #fff;\n              font-size: 28rpx;\n              border-radius: 40rpx;\n              padding: 0 40rpx;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              box-shadow: 0 4rpx 16rpx rgba(74, 163, 255, 0.3);\n              transition: all 0.3s;\n              \n              &:active {\n                transform: translateY(2rpx);\n                box-shadow: 0 2rpx 8rpx rgba(74, 163, 255, 0.2);\n              }\n              \n              .upload-icon {\n                font-size: 28rpx;\n                margin-right: 8rpx;\n              }\n            }\n          }\n        }\n      }\n      \n      .card-actions {\n        display: flex;\n        justify-content: flex-end;\n        padding: 24rpx 30rpx;\n        border-top: 1rpx solid #f0f0f0;\n        \n        button {\n          height: 80rpx;\n          line-height: 80rpx;\n          border-radius: 40rpx;\n          padding: 0 40rpx;\n          font-size: 28rpx;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          margin-left: 20rpx;\n          transition: all 0.3s;\n          \n          .button-icon {\n            font-size: 28rpx;\n            margin-right: 8rpx;\n          }\n          \n          &.test-button {\n            background-color: #f9f0ff;\n            color: #722ed1;\n            box-shadow: 0 4rpx 16rpx rgba(114, 46, 209, 0.15);\n            \n            &:active {\n              transform: translateY(2rpx);\n              box-shadow: 0 2rpx 8rpx rgba(114, 46, 209, 0.1);\n            }\n          }\n          \n          &.save-button {\n            background: linear-gradient(135deg, #4aa3ff 0%, #3a93f0 100%);\n            color: #fff;\n            box-shadow: 0 4rpx 16rpx rgba(74, 163, 255, 0.3);\n            \n            &:active {\n              transform: translateY(2rpx);\n              box-shadow: 0 2rpx 8rpx rgba(74, 163, 255, 0.2);\n            }\n          }\n        }\n      }\n    }\n  }\n}\n\n.loading-overlay {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  background-color: rgba(255, 255, 255, 0.8);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 1000;\n  backdrop-filter: blur(5rpx);\n  -webkit-backdrop-filter: blur(5rpx);\n  \n  .loading-content {\n    background-color: rgba(0, 0, 0, 0.7);\n    padding: 30rpx 60rpx;\n    border-radius: 16rpx;\n    box-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.2);\n    transform: scale(0.9);\n    animation: pulse 1.5s infinite alternate;\n    \n    @keyframes pulse {\n      0% {\n        transform: scale(0.95);\n      }\n      100% {\n        transform: scale(1);\n      }\n    }\n    \n    .loading-text {\n      color: #fff;\n      font-size: 28rpx;\n    }\n  }\n}\n</style> ","import mod from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1742829222158\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}