{"version":3,"sources":["uni-app:///main.js","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/school/college-detail.vue?d7a3","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/school/college-detail.vue?2bac","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/school/college-detail.vue?6607","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/school/college-detail.vue?350e","uni-app:///pages/school/college-detail.vue","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/school/college-detail.vue?7c2b","webpack:////Users/macmima1234/Desktop/projet-zs/frontend/pages/school/college-detail.vue?f745"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","collegeId","collegeName","loading","collegeInfo","majors","otherColleges","isAdmin","token","onLoad","console","uni","title","icon","setTimeout","methods","navBack","checkUserRole","loadCollegeDetail","url","method","success","fail","loadOtherColleges","navigateToCollege","loadMajorsByCollegeId","complete","uploadLogo","count","sizeType","sourceType","filePath","name","formData","directory","header","uploadBanner","uploadMajorIcon","major","uploadMajorImages","tempFilePaths","successCount","uploadCount","getDefaultCollegeInfo","id","degree","duration","description","logoUrl","bannerUrl","getDefaultOtherColleges","loadDefaultMajors","trainingObjectives","mainCourses","careerProspects","iconUrl","images"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,sBAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA2H;AAC3H;AACkE;AACL;AACc;;;AAG3E;AACgN;AAChN,gBAAgB,iNAAU;AAC1B,EAAE,oFAAM;AACR,EAAE,yFAAM;AACR,EAAE,kGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,6FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1BA;AAAA;AAAA;AAAA;AAA40B,CAAgB,4yBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eCgIh2B;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;IACA;EACA;EACAC;IACAC;IACA;MACA;MACA;MACAA;MACA;MACA;MACA;IACA;MACAC;QACAC;QACAC;MACA;MACAC;QACAH;MACA;IACA;EACA;EACAI;IACAC;MACAL;IACA;IAEA;IACAM;MACA;QACA;QACA;UACA;UACA;UACA;QACA;MACA;QACAP;MACA;IACA;IAEAQ;MAAA;MACA;MACAR;;MAEA;MACAC;QACAQ;QACAC;QACAC;UACAX;UACA;YACA;UACA;YACA;YACA;YACAC;cACAC;cACAC;YACA;UACA;;UAEA;UACA;QACA;QACAS;UACAZ;UACA;UACA;;UAEA;UACA;UAEA;UAEAC;YACAC;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAU;MAAA;MACAZ;QACAQ;QACAC;QACAC;UACA;YACA;YACA;cAAA;YAAA;UACA;YACA;UACA;QACA;QACAC;UACA;QACA;MACA;IACA;IAEA;IACAE;MACAb;QACAQ;MACA;IACA;IAEA;IACAM;MAAA;MACAf;MACAC;QACAQ;QACAC;QACAC;UACAX;UACA;YACA;UACA;YACA;UACA;QACA;QACAY;UACAZ;UACA;QACA;QACAgB;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MACA;QACAhB;UACAC;UACAC;QACA;QACA;MACA;MAEAF;QACAiB;QAAA;QACAC;QAAA;QACAC;QAAA;QACAT;UACA;UAEAV;YACAC;UACA;UAEAD;YACAQ;YACAY;YACAC;YACAC;cACAC;YACA;YACAC;cACA;YACA;YACAd;cACA;gBACA;gBACA;kBACA;kBACAV;oBACAC;oBACAC;kBACA;gBACA;kBACAF;oBACAC;oBACAC;kBACA;gBACA;cACA;gBACAF;kBACAC;kBACAC;gBACA;cACA;YACA;YACAS;cACAX;gBACAC;gBACAC;cACA;YACA;YACAa;cACAf;YACA;UACA;QACA;MACA;IACA;IAEA;IACAyB;MAAA;MACA;QACAzB;UACAC;UACAC;QACA;QACA;MACA;MAEAF;QACAiB;QACAC;QACAC;QACAT;UACA;UAEAV;YACAC;UACA;UAEAD;YACAQ;YACAY;YACAC;YACAC;cACAC;YACA;YACAC;cACA;YACA;YACAd;cACA;gBACA;gBACA;kBACA;kBACAV;oBACAC;oBACAC;kBACA;gBACA;kBACAF;oBACAC;oBACAC;kBACA;gBACA;cACA;gBACAF;kBACAC;kBACAC;gBACA;cACA;YACA;YACAS;cACAX;gBACAC;gBACAC;cACA;YACA;YACAa;cACAf;YACA;UACA;QACA;MACA;IACA;IAEA;IACA0B;MAAA;MACA;QACA1B;UACAC;UACAC;QACA;QACA;MACA;MAEAF;QACAiB;QACAC;QACAC;QACAT;UACA;UAEAV;YACAC;UACA;UAEAD;YACAQ;YACAY;YACAC;YACAC;cACAC;YACA;YACAC;cACA;YACA;YACAd;cACA;gBACA;gBACA;kBACAiB;kBACA3B;oBACAC;oBACAC;kBACA;gBACA;kBACAF;oBACAC;oBACAC;kBACA;gBACA;cACA;gBACAF;kBACAC;kBACAC;gBACA;cACA;YACA;YACAS;cACAX;gBACAC;gBACAC;cACA;YACA;YACAa;cACAf;YACA;UACA;QACA;MACA;IACA;IAEA;IACA4B;MAAA;MACA;QACA5B;UACAC;UACAC;QACA;QACA;MACA;MAEAF;QACAiB;QAAA;QACAC;QACAC;QACAT;UACA;UAEAV;YACAC;UACA;;UAEA;UACA;;UAEA;UACA;UACA;UAEA4B;YACA7B;cACAQ;cACAY;cACAC;cACAC;gBACAC;cACA;cACAC;gBACA;cACA;cACAd;gBACA;kBACA;kBACA;oBACAoB;oBACA;sBACAH;oBACA;oBACA;oBACAA;kBACA;gBACA;kBACA5B;gBACA;cACA;cACAgB;gBACAgB;gBACA;kBACA/B;kBACAA;oBACAC;oBACAC;kBACA;gBACA;cACA;YACA;UACA;QACA;MACA;IACA;IAEA;IACA8B;MACA;;MAEA;MACA;QACA;UACAvC;YACAwC;YACAZ;YACAa;YACAC;YACAC;YACAC;YACAC;UACA;UACA;QACA;UACA7C;YACAwC;YACAZ;YACAa;YACAC;YACAC;YACAC;YACAC;UACA;UACA;QACA;QACA;UACA7C;YACAwC;YACAZ;YACAa;YACAC;YACAC;YACAC;YACAC;UACA;MAAA;MAGA;IACA;IAEA;IACAC;MAAA;MACA,QACA;QAAAN;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,GACA;QAAAY;QAAAZ;MAAA,EACA;QAAA;MAAA;IACA;IAEA;IACAmB;MACA;MACA;QACA;UAAA;UACA,eACA;YACAnB;YACAe;YACAK;YACAC;YACAC;YACAC;YACAC,SACA,sCACA,sCACA;UAEA,GACA;YACAxB;YACAe;YACAK;YACAC;YACAC;YACAC;YACAC,SACA,yCACA,yCACA;UAEA,EACA;UACA;QACA;QACA;UACA;MAAA;IAEA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACloBA;AAAA;AAAA;AAAA;AAA2iD,CAAgB,26CAAG,EAAC,C;;;;;;;;;;;ACA/jD;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/school/college-detail.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/school/college-detail.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./college-detail.vue?vue&type=template&id=4c0074ce&\"\nvar renderjs\nimport script from \"./college-detail.vue?vue&type=script&lang=js&\"\nexport * from \"./college-detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./college-detail.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/school/college-detail.vue\"\nexport default component.exports","export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./college-detail.vue?vue&type=template&id=4c0074ce&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = !_vm.loading\n    ? _vm.__map(_vm.majors, function (major, index) {\n        var $orig = _vm.__get_orig(major)\n        var g0 = major.images && major.images.length > 0\n        return {\n          $orig: $orig,\n          g0: g0,\n        }\n      })\n    : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./college-detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./college-detail.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"container\">\n    <view class=\"nav-header\">\n      <view class=\"back-button\" @click=\"navBack\">\n        <text class=\"iconfont icon-left\"></text>\n      </view>\n      <text class=\"nav-title\">院系专业</text>\n      <view class=\"right-icons\">\n        <text class=\"iconfont icon-more\"></text>\n        <text class=\"iconfont icon-minus\"></text>\n        <text class=\"iconfont icon-round\"></text>\n      </view>\n    </view>\n    \n    <!-- 学院头部信息 -->\n    <view class=\"college-header\">\n      <view class=\"college-logo\">\n        <image :src=\"collegeInfo.logoUrl || '/static/images/college-logo.png'\" mode=\"aspectFit\"></image>\n        <!-- Logo上传按钮（仅管理员可见） -->\n        <view class=\"upload-btn\" v-if=\"isAdmin\" @click=\"uploadLogo\">\n          <text class=\"iconfont icon-camera\"></text>\n        </view>\n      </view>\n      <view class=\"college-basic-info\">\n        <view class=\"college-name\">{{ collegeInfo.name }}</view>\n        <view class=\"college-meta\">\n          <text class=\"meta-item\">{{ collegeInfo.degree || '本科' }}</text>\n          <text class=\"meta-divider\">·</text>\n          <text class=\"meta-item\">{{ collegeInfo.duration || '4' }}</text>\n        </view>\n      </view>\n    </view>\n    \n    <!-- 加载中提示 -->\n    <view class=\"loading-container\" v-if=\"loading\">\n      <view class=\"loading\"></view>\n      <text class=\"loading-text\">加载中...</text>\n    </view>\n    \n    <!-- 学院详情内容 -->\n    <scroll-view scroll-y class=\"college-detail-content\" v-else>\n      <!-- 学院宣传图和介绍 -->\n      <view class=\"college-brochure\">\n        <view class=\"banner-container\">\n          <image class=\"college-banner\" :src=\"collegeInfo.bannerUrl || '/static/images/college-banner.jpg'\" mode=\"widthFix\"></image>\n          <!-- 横幅上传按钮（仅管理员可见） -->\n          <view class=\"upload-banner-btn\" v-if=\"isAdmin\" @click=\"uploadBanner\">\n            <text class=\"iconfont icon-camera\"></text>\n            <text class=\"upload-text\">更换横幅</text>\n          </view>\n        </view>\n        \n        <!-- 专业介绍 -->\n        <view class=\"major-section\" v-for=\"(major, index) in majors\" :key=\"index\">\n          <view class=\"major-header\">\n            <view class=\"major-title-box\">\n              <image class=\"college-icon\" :src=\"major.iconUrl || '/static/images/college-icon.png'\" mode=\"aspectFit\"></image>\n              <text class=\"major-title\">{{ major.name }}专业</text>\n            </view>\n            <!-- 专业图标上传按钮（仅管理员可见） -->\n            <view class=\"upload-icon-btn\" v-if=\"isAdmin\" @click=\"uploadMajorIcon(major)\">\n              <text class=\"iconfont icon-camera\"></text>\n            </view>\n          </view>\n          \n          <view class=\"major-content\">\n            <!-- 专业介绍项目 -->\n            <view class=\"intro-item\">\n              <view class=\"intro-title\">• 专业介绍</view>\n              <view class=\"intro-text\">{{ major.description }}</view>\n            </view>\n            \n            <!-- 培养目标 -->\n            <view class=\"intro-item\">\n              <view class=\"intro-title\">• 培养目标</view>\n              <view class=\"intro-text\">{{ major.trainingObjectives || '培养具有扎实的专业基础知识、实践能力和创新精神的高素质专业人才。' }}</view>\n            </view>\n            \n            <!-- 主要课程 -->\n            <view class=\"intro-item\">\n              <view class=\"intro-title\">• 主要课程</view>\n              <view class=\"intro-text\">{{ major.mainCourses || '专业基础课程、专业核心课程、专业选修课程等。' }}</view>\n            </view>\n            \n            <!-- 就业方向 -->\n            <view class=\"intro-item\">\n              <view class=\"intro-title\">• 就业方向</view>\n              <view class=\"intro-text\">{{ major.careerProspects }}</view>\n            </view>\n            \n            <!-- 专业图片展示 -->\n            <view class=\"major-images-container\">\n              <view class=\"major-images\" v-if=\"major.images && major.images.length > 0\">\n                <image class=\"major-image\" v-for=\"(img, imgIndex) in major.images\" \n                      :key=\"imgIndex\" \n                      :src=\"img\" \n                      mode=\"aspectFill\"></image>\n              </view>\n              <view class=\"major-images\" v-else>\n                <image class=\"major-image\" src=\"/static/images/major-image1.jpg\" mode=\"aspectFill\"></image>\n                <image class=\"major-image\" src=\"/static/images/major-image2.jpg\" mode=\"aspectFill\"></image>\n                <image class=\"major-image\" src=\"/static/images/major-image3.jpg\" mode=\"aspectFill\"></image>\n              </view>\n              \n              <!-- 专业图片上传按钮（仅管理员可见） -->\n              <view class=\"upload-major-img-btn\" v-if=\"isAdmin\" @click=\"uploadMajorImages(major)\">\n                <text class=\"iconfont icon-plus\"></text>\n                <text class=\"upload-text\">添加图片</text>\n              </view>\n            </view>\n          </view>\n        </view>\n      </view>\n      \n      <!-- 其他学院列表 -->\n      <view class=\"other-colleges\">\n        <view class=\"other-title\">其他学院</view>\n        <view class=\"other-list\">\n          <view class=\"other-item\" v-for=\"(college, index) in otherColleges\" :key=\"index\" @click=\"navigateToCollege(college)\">\n            <text>{{ college.name }}</text>\n          </view>\n        </view>\n      </view>\n    </scroll-view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      collegeId: null,\n      collegeName: '',\n      loading: true,\n      collegeInfo: {},\n      majors: [],\n      otherColleges: [],\n      isAdmin: false, // 是否为管理员\n      token: '', // 用户令牌\n    }\n  },\n  onLoad(options) {\n    console.log('收到参数:', options);\n    if (options.id) {\n      this.collegeId = options.id;\n      this.collegeName = decodeURIComponent(options.name || '学院详情');\n      console.log('设置collegeId:', this.collegeId, '类型:', typeof this.collegeId);\n      this.loadCollegeDetail();\n      this.loadOtherColleges();\n      this.checkUserRole();\n    } else {\n      uni.showToast({\n        title: '参数错误',\n        icon: 'none'\n      });\n      setTimeout(() => {\n        uni.navigateBack();\n      }, 1500);\n    }\n  },\n  methods: {\n    navBack() {\n      uni.navigateBack();\n    },\n    \n    // 检查用户角色\n    checkUserRole() {\n      try {\n        const userInfo = uni.getStorageSync('userInfo');\n        if (userInfo) {\n          const user = JSON.parse(userInfo);\n          this.isAdmin = user.role === 'ROLE_ADMIN';\n          this.token = user.token;\n        }\n      } catch (e) {\n        console.error('获取用户信息失败:', e);\n      }\n    },\n    \n    loadCollegeDetail() {\n      this.loading = true;\n      console.log('正在请求学院信息, ID:', this.collegeId);\n      \n      // 获取学院信息\n      uni.request({\n        url: `http://localhost:8080/api/college/${this.collegeId}`,\n        method: 'GET',\n        success: (res) => {\n          console.log('学院信息API响应:', res.data);\n          if (res.data) {\n            this.collegeInfo = res.data;\n          } else {\n            // 如果获取失败，使用默认信息\n            this.collegeInfo = this.getDefaultCollegeInfo();\n            uni.showToast({\n              title: '获取学院信息失败',\n              icon: 'none'\n            });\n          }\n          \n          // 获取该学院下的专业列表\n          this.loadMajorsByCollegeId();\n        },\n        fail: (err) => {\n          console.error('获取学院信息失败:', err);\n          // 如果接口请求失败，使用默认信息\n          this.collegeInfo = this.getDefaultCollegeInfo();\n          \n          // 使用默认专业数据\n          this.loadDefaultMajors();\n          \n          this.loading = false;\n          \n          uni.showToast({\n            title: '网络异常，请稍后重试',\n            icon: 'none'\n          });\n        }\n      });\n    },\n    \n    // 获取其他学院列表\n    loadOtherColleges() {\n      uni.request({\n        url: 'http://localhost:8080/api/college/list',\n        method: 'GET',\n        success: (res) => {\n          if (res.data && res.data.length > 0) {\n            // 过滤掉当前学院\n            this.otherColleges = res.data.filter(college => college.id != this.collegeId);\n          } else {\n            this.otherColleges = this.getDefaultOtherColleges();\n          }\n        },\n        fail: () => {\n          this.otherColleges = this.getDefaultOtherColleges();\n        }\n      });\n    },\n    \n    // 导航到其他学院详情\n    navigateToCollege(college) {\n      uni.navigateTo({\n        url: `/pages/school/college-detail?id=${college.id}&name=${encodeURIComponent(college.name)}`\n      });\n    },\n    \n    // 获取该学院下的专业列表\n    loadMajorsByCollegeId() {\n      console.log('正在请求专业列表, 学院ID:', this.collegeId);\n      uni.request({\n        url: `http://localhost:8080/api/major-info/college/${this.collegeId}`,\n        method: 'GET',\n        success: (res) => {\n          console.log('专业列表API响应:', res.data);\n          if (res.data && res.data.length > 0) {\n            this.majors = res.data;\n          } else {\n            this.loadDefaultMajors();\n          }\n        },\n        fail: (err) => {\n          console.error('获取专业列表失败:', err);\n          this.loadDefaultMajors();\n        },\n        complete: () => {\n          this.loading = false;\n        }\n      });\n    },\n    \n    // 上传学院Logo\n    uploadLogo() {\n      if (!this.isAdmin) {\n        uni.showToast({\n          title: '需要管理员权限',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      uni.chooseImage({\n        count: 1, // 只能选择一张图片\n        sizeType: ['compressed'], // 压缩图片\n        sourceType: ['album', 'camera'], // 可以从相册选择或拍照\n        success: (res) => {\n          const tempFilePaths = res.tempFilePaths;\n          \n          uni.showLoading({\n            title: '正在上传...'\n          });\n          \n          uni.uploadFile({\n            url: `http://localhost:8080/api/upload`,\n            filePath: tempFilePaths[0],\n            name: 'file',\n            formData: {\n              directory: `college/logo`\n            },\n            header: {\n              'Authorization': 'Bearer ' + this.token\n            },\n            success: (uploadRes) => {\n              try {\n                const resultData = JSON.parse(uploadRes.data);\n                if (resultData.code === 200) {\n                  this.collegeInfo.logoUrl = resultData.data.url;\n                  uni.showToast({\n                    title: 'Logo上传成功',\n                    icon: 'success'\n                  });\n                } else {\n                  uni.showToast({\n                    title: resultData.message || 'Logo上传失败',\n                    icon: 'none'\n                  });\n                }\n              } catch (e) {\n                uni.showToast({\n                  title: 'Logo上传失败',\n                  icon: 'none'\n                });\n              }\n            },\n            fail: () => {\n              uni.showToast({\n                title: '网络错误，请稍后重试',\n                icon: 'none'\n              });\n            },\n            complete: () => {\n              uni.hideLoading();\n            }\n          });\n        }\n      });\n    },\n    \n    // 上传学院横幅\n    uploadBanner() {\n      if (!this.isAdmin) {\n        uni.showToast({\n          title: '需要管理员权限',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: (res) => {\n          const tempFilePaths = res.tempFilePaths;\n          \n          uni.showLoading({\n            title: '正在上传...'\n          });\n          \n          uni.uploadFile({\n            url: `http://localhost:8080/api/upload`,\n            filePath: tempFilePaths[0],\n            name: 'file',\n            formData: {\n              directory: `college/banner`\n            },\n            header: {\n              'Authorization': 'Bearer ' + this.token\n            },\n            success: (uploadRes) => {\n              try {\n                const resultData = JSON.parse(uploadRes.data);\n                if (resultData.code === 200) {\n                  this.collegeInfo.bannerUrl = resultData.data.url;\n                  uni.showToast({\n                    title: '横幅上传成功',\n                    icon: 'success'\n                  });\n                } else {\n                  uni.showToast({\n                    title: resultData.message || '横幅上传失败',\n                    icon: 'none'\n                  });\n                }\n              } catch (e) {\n                uni.showToast({\n                  title: '横幅上传失败',\n                  icon: 'none'\n                });\n              }\n            },\n            fail: () => {\n              uni.showToast({\n                title: '网络错误，请稍后重试',\n                icon: 'none'\n              });\n            },\n            complete: () => {\n              uni.hideLoading();\n            }\n          });\n        }\n      });\n    },\n    \n    // 上传专业图标\n    uploadMajorIcon(major) {\n      if (!this.isAdmin) {\n        uni.showToast({\n          title: '需要管理员权限',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      uni.chooseImage({\n        count: 1,\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: (res) => {\n          const tempFilePaths = res.tempFilePaths;\n          \n          uni.showLoading({\n            title: '正在上传...'\n          });\n          \n          uni.uploadFile({\n            url: `http://localhost:8080/api/upload`,\n            filePath: tempFilePaths[0],\n            name: 'file',\n            formData: {\n              directory: `major/icon`\n            },\n            header: {\n              'Authorization': 'Bearer ' + this.token\n            },\n            success: (uploadRes) => {\n              try {\n                const resultData = JSON.parse(uploadRes.data);\n                if (resultData.code === 200) {\n                  major.iconUrl = resultData.data.url;\n                  uni.showToast({\n                    title: '图标上传成功',\n                    icon: 'success'\n                  });\n                } else {\n                  uni.showToast({\n                    title: resultData.message || '图标上传失败',\n                    icon: 'none'\n                  });\n                }\n              } catch (e) {\n                uni.showToast({\n                  title: '图标上传失败',\n                  icon: 'none'\n                });\n              }\n            },\n            fail: () => {\n              uni.showToast({\n                title: '网络错误，请稍后重试',\n                icon: 'none'\n              });\n            },\n            complete: () => {\n              uni.hideLoading();\n            }\n          });\n        }\n      });\n    },\n    \n    // 上传专业图片\n    uploadMajorImages(major) {\n      if (!this.isAdmin) {\n        uni.showToast({\n          title: '需要管理员权限',\n          icon: 'none'\n        });\n        return;\n      }\n      \n      uni.chooseImage({\n        count: 3, // 最多可以选择3张图片\n        sizeType: ['compressed'],\n        sourceType: ['album', 'camera'],\n        success: (res) => {\n          const tempFilePaths = res.tempFilePaths;\n          \n          uni.showLoading({\n            title: '正在上传...'\n          });\n          \n          // 创建表单数据\n          const formData = {};\n          \n          // 创建上传任务\n          let uploadCount = 0;\n          let successCount = 0;\n          \n          tempFilePaths.forEach((path, index) => {\n            uni.uploadFile({\n              url: `http://localhost:8080/api/upload`,\n              filePath: path,\n              name: 'file',\n              formData: {\n                directory: `major/images`\n              },\n              header: {\n                'Authorization': 'Bearer ' + this.token\n              },\n              success: (uploadRes) => {\n                try {\n                  const resultData = JSON.parse(uploadRes.data);\n                  if (resultData.code === 200) {\n                    successCount++;\n                    if (!major.images) {\n                      major.images = [];\n                    }\n                    // 更新专业图片列表，添加新上传的图片URL\n                    major.images.push(resultData.data.url);\n                  }\n                } catch (e) {\n                  console.error('解析上传结果失败:', e);\n                }\n              },\n              complete: () => {\n                uploadCount++;\n                if (uploadCount === tempFilePaths.length) {\n                  uni.hideLoading();\n                  uni.showToast({\n                    title: `成功上传${successCount}张图片`,\n                    icon: 'success'\n                  });\n                }\n              }\n            });\n          });\n        }\n      });\n    },\n    \n    // 获取默认学院信息\n    getDefaultCollegeInfo() {\n      let collegeInfo = {};\n      \n      // 根据collegeId获取对应的默认学院信息\n      switch (this.collegeId) {\n        case '1':\n          collegeInfo = {\n            id: 1,\n            name: '航运学院',\n            degree: '本科',\n            duration: '4',\n            description: '航运学院致力于培养航运领域的高素质人才，拥有完善的教学设施和优秀的师资力量。',\n            logoUrl: '/static/images/college/navigation-logo.png',\n            bannerUrl: '/static/images/college/navigation.jpg'\n          };\n          break;\n        case '2':\n          collegeInfo = {\n            id: 2,\n            name: '海洋装备工程学院',\n            degree: '本科',\n            duration: '4',\n            description: '海洋装备工程学院专注于海洋工程装备的研发与应用，培养海洋工程领域的专业人才。',\n            logoUrl: '/static/images/college/marine-logo.png',\n            bannerUrl: '/static/images/college/marine.jpg'\n          };\n          break;\n        // 其他学院默认信息...\n        default:\n          collegeInfo = {\n            id: this.collegeId,\n            name: this.collegeName,\n            degree: '本科',\n            duration: '4',\n            description: '本学院致力于培养高素质、应用型专业人才，注重理论与实践相结合。',\n            logoUrl: '/static/images/college/default-logo.png',\n            bannerUrl: '/static/images/college/default.jpg'\n          };\n      }\n      \n      return collegeInfo;\n    },\n    \n    // 获取默认其他学院列表\n    getDefaultOtherColleges() {\n      return [\n        { id: 2, name: '海洋装备工程学院' },\n        { id: 3, name: '低空装备与智能控制学院' },\n        { id: 4, name: '智能制造学院' },\n        { id: 5, name: '智能交通与工程学院(未来交通学院)' },\n        { id: 6, name: '海事法律与交通管理学院' },\n        { id: 7, name: '数字经济与贸易学院' },\n        { id: 8, name: '计算机学院（人工智能学院）' },\n        { id: 9, name: '数字媒体与交互设计学院' },\n        { id: 10, name: '外国语学院' },\n        { id: 11, name: '国际交流学院（中外合作项目）' }\n      ].filter(item => item.id != this.collegeId);\n    },\n    \n    // 加载默认专业数据\n    loadDefaultMajors() {\n      // 根据不同学院获取默认专业数据\n      switch (this.collegeId) {\n        case '1': // 航运学院\n          this.majors = [\n            {\n              name: '航海技术',\n              description: '航海技术专业是培养具备船舶驾驶、海上运输组织与管理等能力的高级航海人才的专业。学生将学习航海理论、船舶结构、航海气象、海洋环境等相关知识，掌握现代船舶驾驶技术和船舶管理技能。',\n              trainingObjectives: '培养适应我国航运事业发展需要的，具有良好的职业道德和敬业精神，掌握航海技术的基本理论和船舶驾驶技能，能够从事船舶驾驶、海上运输组织与管理工作的高级应用型专门人才。',\n              mainCourses: '船舶结构与设备、航海学、航海气象学、船舶操纵与避碰、海洋环境保护、航行仪器、航运经济与管理、GMDSS通信、轮机基础等。',\n              careerProspects: '毕业生可在航运公司、港口、海事管理等单位从事船舶驾驶、运输管理等工作。也可在航运企事业单位、港航管理部门、海事局等就业。',\n              iconUrl: '/static/images/major/navtech-icon.png',\n              images: [\n                '/static/images/major/navtech-1.jpg',\n                '/static/images/major/navtech-2.jpg',\n                '/static/images/major/navtech-3.jpg'\n              ]\n            },\n            {\n              name: '轮机工程',\n              description: '轮机工程专业培养具备船舶动力装置操作、维护与管理等能力的专业人才。学生将学习船舶动力系统、电气自动化、热工系统等相关知识，掌握船舶机械设备的操作与维护技能。',\n              trainingObjectives: '培养具有轮机工程领域的基础理论知识和专业技能，能够从事船舶机械设备操作、维护与管理等工作的高级工程技术人才。',\n              mainCourses: '船舶柴油机、船舶辅机、船舶电气设备、船舶自动化系统、制冷与空调、船舶动力装置、船舶机械设备管理等。',\n              careerProspects: '毕业生可在航运公司、船厂、海事管理等单位从事船舶轮机管理等工作，也可在船舶检验、设计、制造单位和海事管理部门就业。',\n              iconUrl: '/static/images/major/marine-eng-icon.png',\n              images: [\n                '/static/images/major/marine-eng-1.jpg',\n                '/static/images/major/marine-eng-2.jpg',\n                '/static/images/major/marine-eng-3.jpg'\n              ]\n            }\n          ];\n          break;\n        // 其他专业默认数据...\n        default:\n          this.majors = [];\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.container {\n  min-height: 100vh;\n  background-color: #f5f5f5;\n  display: flex;\n  flex-direction: column;\n}\n\n.nav-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  background: #3a86ff;\n  color: #fff;\n  padding: 20rpx 30rpx;\n  position: relative;\n  height: 80rpx;\n  \n  .back-button {\n    font-size: 40rpx;\n    width: 60rpx;\n  }\n  \n  .nav-title {\n    font-size: 34rpx;\n    font-weight: 500;\n    text-align: center;\n    flex: 1;\n  }\n  \n  .right-icons {\n    display: flex;\n    justify-content: flex-end;\n    width: 160rpx;\n    \n    .iconfont {\n      margin-left: 30rpx;\n      font-size: 36rpx;\n    }\n  }\n}\n\n.college-header {\n  background-color: #eef7ff;\n  padding: 30rpx;\n  display: flex;\n  align-items: center;\n  \n  .college-logo {\n    width: 120rpx;\n    height: 120rpx;\n    margin-right: 30rpx;\n    position: relative;\n    \n    image {\n      width: 100%;\n      height: 100%;\n    }\n    \n    .upload-btn {\n      position: absolute;\n      right: -10rpx;\n      bottom: -10rpx;\n      width: 50rpx;\n      height: 50rpx;\n      background-color: rgba(58, 134, 255, 0.8);\n      border-radius: 50%;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      color: white;\n      font-size: 24rpx;\n    }\n  }\n  \n  .college-basic-info {\n    flex: 1;\n    \n    .college-name {\n      font-size: 36rpx;\n      font-weight: bold;\n      color: #333;\n      margin-bottom: 10rpx;\n    }\n    \n    .college-meta {\n      display: flex;\n      align-items: center;\n      \n      .meta-item {\n        font-size: 28rpx;\n        color: #3a86ff;\n        font-weight: 500;\n      }\n      \n      .meta-divider {\n        margin: 0 10rpx;\n        color: #3a86ff;\n      }\n    }\n  }\n}\n\n.loading-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 100rpx 0;\n  \n  .loading {\n    width: 60rpx;\n    height: 60rpx;\n    border: 6rpx solid #f3f3f3;\n    border-top: 6rpx solid #3399cc;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n  \n  .loading-text {\n    color: #999;\n    font-size: 28rpx;\n    margin-top: 20rpx;\n  }\n  \n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n}\n\n.college-detail-content {\n  flex: 1;\n  \n  .college-brochure {\n    background-color: #fff;\n    \n    .banner-container {\n      position: relative;\n      \n      .college-banner {\n        width: 100%;\n      }\n      \n      .upload-banner-btn {\n        position: absolute;\n        right: 20rpx;\n        bottom: 20rpx;\n        background-color: rgba(0, 0, 0, 0.6);\n        color: white;\n        padding: 10rpx 20rpx;\n        border-radius: 30rpx;\n        display: flex;\n        align-items: center;\n        font-size: 24rpx;\n        \n        .iconfont {\n          margin-right: 10rpx;\n        }\n      }\n    }\n    \n    .major-section {\n      padding-bottom: 20rpx;\n      \n      .major-header {\n        padding: 20rpx 30rpx;\n        background-color: #3a86ff;\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        \n        .major-title-box {\n          display: flex;\n          align-items: center;\n          \n          .college-icon {\n            width: 40rpx;\n            height: 40rpx;\n            margin-right: 15rpx;\n          }\n          \n          .major-title {\n            color: #fff;\n            font-size: 32rpx;\n            font-weight: 500;\n          }\n        }\n        \n        .upload-icon-btn {\n          width: 40rpx;\n          height: 40rpx;\n          background-color: rgba(255, 255, 255, 0.3);\n          border-radius: 50%;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: white;\n          font-size: 22rpx;\n        }\n      }\n      \n      .major-content {\n        padding: 20rpx 30rpx;\n        \n        .intro-item {\n          margin-bottom: 20rpx;\n          \n          .intro-title {\n            font-size: 28rpx;\n            color: #333;\n            font-weight: bold;\n            margin-bottom: 10rpx;\n          }\n          \n          .intro-text {\n            font-size: 26rpx;\n            color: #666;\n            line-height: 1.6;\n            text-align: justify;\n          }\n        }\n        \n        .major-images-container {\n          position: relative;\n          \n          .major-images {\n            display: flex;\n            flex-wrap: wrap;\n            margin-top: 15rpx;\n            justify-content: space-between;\n            \n            .major-image {\n              width: 31%;\n              height: 180rpx;\n              margin-bottom: 10rpx;\n              border-radius: 6rpx;\n            }\n          }\n          \n          .upload-major-img-btn {\n            margin-top: 10rpx;\n            padding: 15rpx;\n            background-color: #f5f5f5;\n            border-radius: 6rpx;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: #3a86ff;\n            font-size: 26rpx;\n            \n            .iconfont {\n              margin-right: 10rpx;\n            }\n          }\n        }\n      }\n    }\n  }\n  \n  .other-colleges {\n    margin-top: 20rpx;\n    background-color: #fff;\n    padding: 20rpx 30rpx;\n    \n    .other-title {\n      font-size: 32rpx;\n      font-weight: bold;\n      color: #333;\n      margin-bottom: 20rpx;\n    }\n    \n    .other-list {\n      .other-item {\n        padding: 16rpx 0;\n        border-bottom: 1rpx solid #f0f0f0;\n        font-size: 28rpx;\n        color: #333;\n        \n        &:last-child {\n          border-bottom: none;\n        }\n      }\n    }\n  }\n}\n</style> ","import mod from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./college-detail.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./college-detail.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1742829222111\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"/\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}