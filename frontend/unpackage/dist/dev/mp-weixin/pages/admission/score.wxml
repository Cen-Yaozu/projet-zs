<view class="container"><view class="header"><text class="title">广州航海学院历年分数</text></view><view class="filter-bar"><view data-event-opts="{{[['tap',[['openYearPopup',['$event']]]]]}}" class="year-selector" bindtap="__e"><uni-icons vue-id="3d1bfc7a-1" type="calendar" size="20" color="#0f3c88" bind:__l="__l"></uni-icons><text class="year-text">{{currentYear||'选择年份'}}</text></view><view data-event-opts="{{[['tap',[['toggleDisplayMode',['$event']]]]]}}" class="display-mode" bindtap="__e"><uni-icons vue-id="3d1bfc7a-2" type="{{displayMode==='card'?'list':'grid'}}" size="20" color="#f89d35" bind:__l="__l"></uni-icons><text class="mode-text">{{displayMode==='card'?'表格式':'卡片式'}}</text></view></view><block wx:if="{{!currentYear}}"><view class="guide-tips"><text>请选择年份查看分数数据</text></view></block><block wx:else><block wx:if="{{loading}}"><view class="loading"><uni-load-more vue-id="3d1bfc7a-3" status="loading" content-text="{{loadingText}}" bind:__l="__l"></uni-load-more></view></block><block wx:else><block wx:if="{{$root.g0===0}}"><view class="empty-data"><text>暂无数据</text></view></block><block wx:else><block wx:if="{{displayMode==='card'}}"><view class="score-list"><block wx:for="{{processedData}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="score-item"><view class="major-name"><view class="major-indicator"></view><text>{{item.majorName}}</text></view><view class="score-details"><view class="detail-col"><view class="detail-row"><text class="label">年份：</text><text class="value blue">{{item.year}}</text></view><view class="detail-row"><text class="label">录取人数：</text><text class="value blue">{{item.planNumber||'0'}}</text></view><view class="detail-row"><text class="label">最低分：</text><text class="value blue">{{item.minScore||'-'}}</text></view><view class="detail-row"><text class="label">首选科目：</text><text class="value blue">{{item.firstSubject||'物理'}}</text></view></view><view class="detail-col"><view class="detail-row"><text class="label">省份：</text><text class="value blue">{{item.province||'-'}}</text></view><view class="detail-row"><text class="label">最高分：</text><text class="value blue">{{item.maxScore||item.minScore||'-'}}</text></view><view class="detail-row"><text class="label">省控线：</text><text class="value blue">{{item.provinceControlLine||'475'}}</text></view><view class="detail-row"><text class="label">再选科目：</text><text class="value blue">{{item.secondSubject||'化学'}}</text></view></view></view></view></block></view></block><block wx:else><view class="table-view"><view class="table-top-bar"><view class="year-filter"><uni-icons vue-id="3d1bfc7a-4" type="calendar" size="20" color="#333" bind:__l="__l"></uni-icons><text class="year-text">{{currentYear}}</text></view><view data-event-opts="{{[['tap',[['toggleDisplayMode',['$event']]]]]}}" class="mode-switch" bindtap="__e"><uni-icons vue-id="3d1bfc7a-5" type="grid" size="20" color="#f89d35" bind:__l="__l"></uni-icons><text class="mode-text">卡片式</text></view></view><view class="table-header"><view class="table-cell">年份</view><view class="table-cell">科类</view><view class="table-cell">省份</view><view class="table-cell">专业名称</view></view><block wx:for="{{tableData}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="table-row"><view class="table-cell">{{item.year}}</view><view class="table-cell">{{item.category||'理科'}}</view><view class="table-cell">{{item.province}}</view><view class="table-cell">{{item.majorName}}</view></view></block></view></block></block></block></block><block wx:if="{{showYearSelect}}"><view data-event-opts="{{[['tap',[['closeYearPopup',['$event']]]]]}}" class="custom-popup" catchtap="__e"><view class="popup-mask"></view><view data-event-opts="{{[['tap',[['',['$event']]]]]}}" class="popup-content" catchtap="__e"><view class="popup-title"><text>选择年份</text></view><view class="year-list"><block wx:for="{{years}}" wx:for-item="year" wx:for-index="__i0__" wx:key="*this"><view data-event-opts="{{[['tap',[['selectYear',['$0'],[[['years','',__i0__]]]]]]]}}" class="{{['year-item',(currentYear===year)?'active':'']}}" bindtap="__e"><text>{{year+"年"}}</text></view></block></view><view data-event-opts="{{[['tap',[['closeYearPopup',['$event']]]]]}}" class="popup-cancel-btn" bindtap="__e"><text>取消</text></view></view></view></block></view>