<view class="container"><view class="header"><view data-event-opts="{{[['tap',[['navBack',['$event']]]]]}}" class="back-button" bindtap="__e"><text class="iconfont icon-left"></text></view><text class="title">学院管理</text></view><view class="content"><view class="filter-bar"><view class="search-box"><text class="iconfont icon-search"></text><input class="input" type="text" placeholder="搜索学院名称" data-event-opts="{{[['input',[['__set_model',['','searchKeyword','$event',[]]]]]]}}" value="{{searchKeyword}}" bindinput="__e"/><block wx:if="{{searchKeyword}}"><text data-event-opts="{{[['tap',[['e0',['$event']]]]]}}" class="clear-icon iconfont icon-close" bindtap="__e"></text></block></view><button data-event-opts="{{[['tap',[['handleAddCollege',['$event']]]]]}}" class="add-button" bindtap="__e"><text class="add-icon iconfont icon-add"></text><text>新增学院</text></button></view><view class="college-list"><block wx:if="{{$root.g0}}"><view class="empty-tip"><text class="empty-icon iconfont icon-empty"></text><view>暂无学院数据</view></view></block><block wx:for="{{filteredColleges}}" wx:for-item="college" wx:for-index="index" wx:key="id"><view class="college-item"><view data-event-opts="{{[['tap',[['navigateToDetail',['$0'],[[['filteredColleges','id',college.id]]]]]]]}}" class="college-info" bindtap="__e"><image class="college-logo" src="{{college.logoUrl||'/static/images/college-logo.png'}}" mode="aspectFit"></image><view class="info-content"><view class="college-name">{{college.name}}</view><view class="college-meta"><view class="meta-item"><text class="meta-icon iconfont icon-education"></text><text>{{college.degree||'未设置'}}</text></view><view class="meta-item"><text class="meta-icon iconfont icon-time"></text><text>{{(college.duration||'未设置')+"年"}}</text></view></view><block wx:if="{{college.introduction}}"><view class="college-intro">{{college.introduction}}</view></block></view></view><view class="action-row"><button data-event-opts="{{[['tap',[['navigateToDetail',['$0'],[[['filteredColleges','id',college.id]]]]]]]}}" class="action-button edit-btn" bindtap="__e">编辑</button><button data-event-opts="{{[['tap',[['navigateToMajors',['$0'],[[['filteredColleges','id',college.id]]]]]]]}}" class="action-button view-btn" bindtap="__e">专业</button><button data-event-opts="{{[['tap',[['handleDeleteCollege',['$0'],[[['filteredColleges','id',college.id]]]]]]]}}" class="action-button delete-btn" bindtap="__e">删除</button></view></view></block></view><block wx:if="{{$root.g1>0}}"><view class="pagination"><button data-event-opts="{{[['tap',[['handlePageChange',[currentPage-1]]]]]}}" class="{{['page-btn','prev-btn',(currentPage===1)?'disabled':'']}}" bindtap="__e">上一页</button><block wx:for="{{$root.l0}}" wx:for-item="page" wx:for-index="__i0__" wx:key="*this"><button data-event-opts="{{[['tap',[['e1',['$event']]]]]}}" data-event-params="{{({page})}}" class="{{['page-btn',(page===currentPage)?'active':'']}}" bindtap="__e">{{page}}</button></block><button data-event-opts="{{[['tap',[['handlePageChange',[currentPage+1]]]]]}}" class="{{['page-btn','next-btn',(currentPage===totalPages)?'disabled':'']}}" bindtap="__e">下一页</button><text class="page-text">{{"共 "+total+" 条"}}</text></view></block></view><block wx:if="{{loading}}"><view class="loading-overlay"><view class="loading-content"><text class="loading-text">加载中...</text></view></view></block><block wx:if="{{showDeleteConfirm}}"><view class="confirm-modal"><view class="modal-content"><view class="modal-header"><text class="modal-title">确认删除</text></view><view class="modal-body"><text class="modal-message">{{"确定要删除 "+collegeToDelete.name+" 及其所有专业信息吗？此操作不可恢复！"}}</text></view><view class="modal-footer"><text data-event-opts="{{[['tap',[['cancelDelete',['$event']]]]]}}" class="modal-btn cancel-btn" bindtap="__e">取消</text><text data-event-opts="{{[['tap',[['confirmDelete',['$event']]]]]}}" class="modal-btn confirm-btn" bindtap="__e">删除</text></view></view></view></block></view>