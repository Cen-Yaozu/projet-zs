<view class="container"><view class="header"><view data-event-opts="{{[['tap',[['navBack',['$event']]]]]}}" class="back-button" bindtap="__e"><text class="iconfont icon-left"></text></view><text class="title">系统设置</text></view><view class="content"><view class="setting-groups"><view class="setting-card"><view class="card-header"><text class="card-title"><text class="title-icon iconfont icon-basic"></text>基础设置</text></view><view class="setting-list"><view class="setting-item"><view class="setting-label">系统名称</view><view class="setting-editor"><input class="input" type="text" placeholder="请输入系统名称" data-event-opts="{{[['input',[['__set_model',['$0','systemName','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.systemName}}" bindinput="__e"/></view></view><view class="setting-item"><view class="setting-label">系统Logo</view><view class="setting-editor"><block wx:if="{{systemSettings.logoUrl}}"><view class="logo-preview"><image class="logo-image" src="{{systemSettings.logoUrl}}" mode="aspectFit"></image><text data-event-opts="{{[['tap',[['removeLogo',['$event']]]]]}}" class="logo-remove iconfont icon-delete" bindtap="__e"></text></view></block><block wx:else><button data-event-opts="{{[['tap',[['uploadLogo',['$event']]]]]}}" class="upload-button" bindtap="__e"><text class="upload-icon iconfont icon-upload"></text><text>上传Logo</text></button></block></view></view><view class="setting-item"><view class="setting-label">系统描述</view><view class="setting-editor"><textarea class="textarea" placeholder="请输入系统描述" data-event-opts="{{[['input',[['__set_model',['$0','systemDesc','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.systemDesc}}" bindinput="__e"></textarea></view></view></view><view class="card-actions"><button data-event-opts="{{[['tap',[['saveSetting',['basic']]]]]}}" class="save-button" bindtap="__e"><text class="button-icon iconfont icon-save"></text>保存更改</button></view></view><view class="setting-card"><view class="card-header"><text class="card-title"><text class="title-icon iconfont icon-notice"></text>通知设置</text></view><view class="setting-list"><view class="setting-item"><view class="setting-label">邮件通知</view><view class="setting-editor"><switch class="switch" checked="{{systemSettings.emailNotificationEnabled}}" color="#4aa3ff" data-event-opts="{{[['change',[['handleSwitchChange',['emailNotificationEnabled','$event']]]]]}}" bindchange="__e"></switch></view></view><block wx:if="{{systemSettings.emailNotificationEnabled}}"><view class="setting-item"><view class="setting-label">SMTP服务器</view><view class="setting-editor"><input class="input" type="text" placeholder="请输入SMTP服务器地址" data-event-opts="{{[['input',[['__set_model',['$0','smtpServer','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.smtpServer}}" bindinput="__e"/></view></view></block><block wx:if="{{systemSettings.emailNotificationEnabled}}"><view class="setting-item"><view class="setting-label">SMTP端口</view><view class="setting-editor"><input class="input" type="number" placeholder="请输入SMTP端口" data-event-opts="{{[['input',[['__set_model',['$0','smtpPort','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.smtpPort}}" bindinput="__e"/></view></view></block><block wx:if="{{systemSettings.emailNotificationEnabled}}"><view class="setting-item"><view class="setting-label">邮箱账号</view><view class="setting-editor"><input class="input" type="text" placeholder="请输入邮箱账号" data-event-opts="{{[['input',[['__set_model',['$0','emailAccount','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.emailAccount}}" bindinput="__e"/></view></view></block><block wx:if="{{systemSettings.emailNotificationEnabled}}"><view class="setting-item"><view class="setting-label">邮箱密码</view><view class="setting-editor"><input class="input" type="password" placeholder="请输入邮箱密码" data-event-opts="{{[['input',[['__set_model',['$0','emailPassword','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.emailPassword}}" bindinput="__e"/></view></view></block></view><view class="card-actions"><block wx:if="{{systemSettings.emailNotificationEnabled}}"><button data-event-opts="{{[['tap',[['testEmail',['$event']]]]]}}" class="test-button" bindtap="__e"><text class="button-icon iconfont icon-test"></text>测试发送</button></block><button data-event-opts="{{[['tap',[['saveSetting',['email']]]]]}}" class="save-button" bindtap="__e"><text class="button-icon iconfont icon-save"></text>保存更改</button></view></view><view class="setting-card"><view class="card-header"><text class="card-title"><text class="title-icon iconfont icon-security"></text>安全设置</text></view><view class="setting-list"><view class="setting-item"><view class="setting-label">登录限制</view><view class="setting-editor"><switch class="switch" checked="{{systemSettings.loginLimitEnabled}}" color="#4aa3ff" data-event-opts="{{[['change',[['handleSwitchChange',['loginLimitEnabled','$event']]]]]}}" bindchange="__e"></switch></view></view><block wx:if="{{systemSettings.loginLimitEnabled}}"><view class="setting-item"><view class="setting-label">最大尝试次数</view><view class="setting-editor"><input class="input" type="number" placeholder="请输入最大尝试次数" data-event-opts="{{[['input',[['__set_model',['$0','maxLoginAttempts','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.maxLoginAttempts}}" bindinput="__e"/></view></view></block><block wx:if="{{systemSettings.loginLimitEnabled}}"><view class="setting-item"><view class="setting-label">锁定时间(分钟)</view><view class="setting-editor"><input class="input" type="number" placeholder="请输入锁定时间" data-event-opts="{{[['input',[['__set_model',['$0','lockDurationMinutes','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.lockDurationMinutes}}" bindinput="__e"/></view></view></block><view class="setting-item"><view class="setting-label">密码策略</view><view class="setting-editor"><switch class="switch" checked="{{systemSettings.passwordPolicyEnabled}}" color="#4aa3ff" data-event-opts="{{[['change',[['handleSwitchChange',['passwordPolicyEnabled','$event']]]]]}}" bindchange="__e"></switch></view></view><block wx:if="{{systemSettings.passwordPolicyEnabled}}"><view class="setting-item"><view class="setting-label">最小密码长度</view><view class="setting-editor"><input class="input" type="number" placeholder="请输入最小密码长度" data-event-opts="{{[['input',[['__set_model',['$0','minPasswordLength','$event',[]],['systemSettings']]]]]}}" value="{{systemSettings.minPasswordLength}}" bindinput="__e"/></view></view></block><block wx:if="{{systemSettings.passwordPolicyEnabled}}"><view class="setting-item"><view class="setting-label">密码复杂度要求</view><view class="setting-editor"><picker range="{{passwordComplexityOptions}}" value="{{passwordComplexityIndex}}" data-event-opts="{{[['change',[['handleComplexityChange',['$event']]]]]}}" bindchange="__e"><view class="picker-value">{{''+passwordComplexityOptions[passwordComplexityIndex]+''}}<text class="iconfont icon-down"></text></view></picker></view></view></block></view><view class="card-actions"><button data-event-opts="{{[['tap',[['saveSetting',['security']]]]]}}" class="save-button" bindtap="__e"><text class="button-icon iconfont icon-save"></text>保存更改</button></view></view></view></view><block wx:if="{{loading}}"><view class="loading-overlay"><view class="loading-content"><text class="loading-text">加载中...</text></view></view></block></view>